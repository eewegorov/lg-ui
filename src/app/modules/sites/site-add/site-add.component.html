<app-color-line type="modals"></app-color-line>
<div class="modal-header text-center justify-content-center">
  <h3 class="modal-title">{{ 'sitelist.form.title' | translate }}</h3>
</div>
<div class="modal-body">
  <form [formGroup]="newSiteForm" (ngSubmit)="createSite()">
    <div class="tab-content">
      <div *ngIf="tab === 1" class="p-3">
        <div class="row">
          <div class="col-lg-12">
            <div class="row">
              <div class="form-group col-lg-12">
                <label class="control-label">{{ 'sitelist.form.name' | translate }}</label>
                <input type="text" class="form-control" formControlName="name" required>
                <span class="small" [innerHTML]="'sitelist.form.start.desc1' | translate"></span>
              </div>
              <div class="form-group col-lg-12" [ngClass]="{ 'has-error': isUrlInvalid }">
                <label class="control-label">{{ 'sitelist.form.url' | translate }}</label>
                <input type="text" class="form-control" formControlName="url" (change)="enableTyping()" required>
                <span class="small" [innerHTML]="'sitelist.form.start.desc2' | translate">.</span>
              </div>
              <div class="form-group col-lg-12" id="phoneContainer" *ngIf="!hidePhone">
                <label class="control-label">{{ 'sitelist.form.phone.title' | translate }}</label>
                <input type="text" class="form-control" formControlName="phone">
                <span class="small">{{ 'sitelist.form.phone.desc' | translate }}</span>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-between mt-2 mb-2">
          <button class="btn btn-lg btn-default" (click)="closeModal()">{{ 'global.cancel' | translate }}</button>
          <button type="submit" class="btn btn-lg btn-success" [disabled]="!newSiteForm.valid"> {{ 'sitelist.form.save' | translate }}</button>
        </div>
      </div>

      <div *ngIf="tab === 2">
        <div class="row text-center m-b-lg" tooltiped>
          <div class="col-lg-12">
            <h3 class="m-b-md">{{ 'sitelist.save.done' | translate }}</h3>
          </div>
          <div class="row">
            <div class="col-lg-1"></div>
            <div class="col-lg-10 text-left"><strong>{{ 'sitelist.form.code.desc1' | translate }}</strong></div>
            <div class="col-lg-1"></div>
          </div>
          <div class="row margined-top-3">
            <div class="col-lg-1"></div>
            <div class="form-group col-lg-10">
              <textarea select-on-click ng-model="createdSite.codePath" class="form-control not-readonly-hand" width="80%" rows="5" readonly="true" ></textarea>
            </div>
            <div class="col-lg-1"></div>
          </div>
          <div class="row">
            <div class="col-lg-10 col-lg-offset-1 text-left">
              <strong>
                {{ 'settings.script.apicode.title' | translate }} <a data-container="body" data-toggle="tooltip" data-placement="top" data-title="{{ 'settings.script.apicode.tooltip' | translate }}" class="info-link" href="#"><i class="fa fa-info-circle"></i></a>
              </strong>
            </div>
          </div>
          <div class="row margined-top-3">
            <div class="col-lg-1"></div>
            <div class="form-group col-lg-10" data-context="url">
              <input select-on-click ng-model="createdSite.id" type="text" readonly="true" name="name" class="form-control not-readonly-hand" value="">
            </div>
            <div class="col-lg-1"></div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12 text-center">
            <h3>{{ 'sitelist.form.goto' | translate }}</h3>
          </div>
        </div>
        <div class="text-center m-t-xs">
          <a class="btn btn-lg btn-success next" ng-click="setTab(3)" href="#" style="width: 310px;"> {{ 'sitelist.form.gotopoints' | translate }}</a>
          <a class="simple-link" href="/site/list">{{ 'sitelist.form.gotoaway' | translate }}</a>
        </div>
      </div>

      <div *ngIf="tab === 3">
        <div class="row text-center m-b-lg">
          <div class="col-lg-12 margined-bottom-10">
            <h3>{{ 'sitelist.form.smartpoints.settings' | translate }}</h3>
          </div>
          <div class="row">
            <div class="col-lg-1"></div>
            <div class="col-lg-10 text-left f-9">{{ 'sitelist.form.smartpoints.desc1' | translate }}</div>
            <div class="col-lg-1"></div>
          </div>
        </div>

        <div class="row widgets-options-container2">
          <!--<smartpoints-control-directive smart-points="smartPoints" site-id="createdSite.id"></smartpoints-control-directive>-->
        </div>

        <div class="row margined-top-20">
          <div class="col-lg-12 text-center">
            <h3>{{ 'sitelist.form.goto' | translate }}</h3>
          </div>
        </div>
        <div class="text-center m-t-xs margined-top-20 margined-bottom-20">
          <a class="btn btn-lg btn-success next" ng-click="goToCreateOwnWidgets()" style="width: 425px;"> {{ 'sitelist.form.gotowidgets' | translate }}</a>
        </div>
      </div>
    </div>
  </form>
</div>
