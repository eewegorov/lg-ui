<div [id]="item.id">
  <div class="col-lg-12 itempanel hpanel">
    <div class="row panel-heading">
      <span class="itemName">{{ item.name }}</span>
    </div>
    <div class="row panel-body justify-content-between">
      <div class="col-lg-5 itempanel-title">
        <div class="row justify-content-between align-items-center">
          <h3>{{ item.url }}</h3>
          <button
            (click)="goToSiteSettings()"
            [id]="item.id + '_button'"
            class="btn btn-default editItem"
            type="button"><i class="fa fa-cogs"></i> {{ 'header.settings' | translate }}
          </button>
        </div>
        <div class="row mt-2">
          <div class="tariff">
            <h5 *ngIf="item.isFree">
              {{ 'sitelist.tariff.title' | translate }}: <b>{{ 'sitelist.tariff.free' | translate }}</b>
              <button
                (click)="improvePlan()"
                class="improve2 btn btn-danger btn-xs">{{ 'sitelist.improve' | translate }}</button>
            </h5>
            <h5 *ngIf="!item.isFree">
              {{ 'sitelist.tariff.title' | translate }}: <b>{{ item.tariffName }}</b>
              ( {{ 'global.until' | translate }} {{ item.tariffExpTime }} )
              <button
                (click)="improvePlan()"
                class="improve2 btn btn-success btn-xs">{{ 'sitelist.extend' | translate }}</button>
            </h5>
          </div>
        </div>
        <div class="row mt-3">
          <h5>{{ 'sitelist.weekinfo.title' | translate }}:</h5>
        </div>
        <div class="row justify-content-between mb-3">
          <div class="site-item-week-info">
            <div class="week-value">{{ actionsStatsWeekCount | thousandSuffix:2 }}</div>
            <div [innerHTML]="'sitelist.weekinfo.actions' | translate" class="week-data-name"></div>
          </div>
          <div class="site-item-week-info">
            <div class="week-value">{{ leadsStatsWeekCount | thousandSuffix:2 }}</div>
            <div [innerHTML]="'sitelist.weekinfo.leads' | translate" class="week-data-name"></div>
          </div>
          <div class="site-item-week-info">
            <div class="week-value">{{ mailStatsWeekCount | thousandSuffix:2 }}</div>
            <div [innerHTML]="'sitelist.weekinfo.mails' | translate" class="week-data-name"></div>
          </div>
        </div>
      </div>
      <div class="col-lg-6 chartcontainer">
        <div *ngIf="isLoading" class="flex-column-site-wr align-items-center justify-content-center">
          <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </div>
        <ng-container *ngIf="!isLoading">
          <div *ngIf="actionsStatsWeekCount > 0 || leadsStatsWeekCount > 0 || mailStatsWeekCount > 0"
               class="flex-column-site-wr">
            <div class="chartlegend-container mb-1">
              <div *ngIf="actionsStatsWeekCount > 0" class="chartlegend">
                <div class="charticon targetlegend"></div>
                <h5>{{ 'sitelist.chartLegend.widgets' | translate }}</h5>
              </div>
              <div *ngIf="leadsStatsWeekCount > 0" class="chartlegend">
                <div class="charticon bluebg"></div>
                <h5>{{ 'sitelist.chartLegend.leads' | translate }}</h5>
              </div>
              <div *ngIf="mailStatsWeekCount > 0" class="chartlegend">
                <div class="charticon orangebg"></div>
                <h5>{{ 'sitelist.chartLegend.emails' | translate }}</h5>
              </div>
            </div>
            <canvas
              [colors]="colors"
              [data]="data"
              [labels]="labels"
              [legend]="false"
              [options]="options"
              baseChart
              chartType="line"
              height="100"
              id="line"
              style="max-height: 200px"
            >
            </canvas>
          </div>
          <div *ngIf="actionsStatsWeekCount <= 0 && leadsStatsWeekCount <= 0 && mailStatsWeekCount <= 0"
               class="no-data-graph-title">
            <div>{{ 'global.noData' | translate }}</div>
          </div>
        </ng-container>
      </div>
      <div *ngIf="!item.isFree && item.tariffExpLeftMs < 604800000" class="col-lg-12 site-item-notification">
        <div class="notify-text">{{ 'sitelist.notification.payment' | translate }}</div>
      </div>
      <div *ngIf="item.hasCrmSyncErrors" class="col-lg-12 site-item-notification">
        <div class="notify-text">{{ 'sitelist.notification.crm' | translate }}</div>
      </div>
      <div *ngIf="item.hasMailSyncErrors" class="col-lg-12 site-item-notification">
        <div class="notify-text">{{ 'sitelist.notification.mail' | translate }}</div>
      </div>
    </div>
  </div>
</div>
